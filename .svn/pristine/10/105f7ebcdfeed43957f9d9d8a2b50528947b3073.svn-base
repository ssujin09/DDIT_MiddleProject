<%@page import="mypage.service.MypageServiceImple"%>
<%@page import="mypage.service.IMypageService"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
 <title>ë§›ìˆì„ì§€ë„ ğŸ§‘â€ğŸ³</title>

<%
	IMypageService mypageService = MypageServiceImple.getInstance();
%>
<script src="<%=request.getContextPath()%>/assets/js/jquery-3.7.1.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css"/>
</head>


<body>
	<div class="col-lg-9 col-md-12 col-12">
		<div class="main-content">
			<div class="dashboard-block mt-0">
				<h3 class="block-title">ë‚´ ê²Œì‹œê¸€</h3>
				<nav class="list-nav">
					<ul>
									<li class="active"><a href="<%=request.getContextPath()%>/mypage/freeboard.do?active=myPost">ê²Œì‹œê¸€ëª©ë¡<span>
									<%if(communityList != null) {%>
									<%=communityList.size()%>
									<%} else {%>
									0
									<%} %>
									</span>
									</a></li>
									<li ><a href="<%=request.getContextPath()%>/mypage/freeboard.do?active=myReview">ë¦¬ë·°ëª©ë¡ <span>
									<%if(reviewList != null){ %>
									<%= reviewList.size() %>
									<%}else{%>
									0
									<%} %>
									</span></a></li>
									<li ><a href="<%=request.getContextPath()%>/mypage/freeboard.do?active=myComment">ëŒ“ê¸€ëª©ë¡ <span>
									<%if(commentList != null){ %>
									<%= commentList.size()%>
									<%} else{%>
									0
									<%} %>
									</span></a></li>
					</ul>
				</nav>
				<!-- Start Items Area -->
				<div class="my-items">
					<!-- Start Item List Title -->
					<div class="item-list-title">
						<div class="row align-items-center">
							<div class="col-lg-5 col-md-5 col-12">
								<p>ì œëª©</p>
							</div>
							<div class="col-lg-2 col-md-2 col-12">
								<p>ì‘ì„±ì</p>
							</div>
							<div class="col-lg-2 col-md-2 col-12">
								<p>ì‘ì„±ì¼</p>
							</div>
							<div class="col-lg-3 col-md-3 col-12 align-right">
								<p>ì‘ì—…</p>
							</div>
						</div>
					</div>
					<!-- End List Title -->
					<!-- Start Single List -->
					<!-- ì‘ì„±ì¤‘ -->
					<%
								if (communityList != null) {
									for (CmmntyVO cv : communityList) {
								%>
					<div class="single-item-list">
						<div class="row align-items-center">
							<div class="col-lg-5 col-md-5 col-12">
								<div class="item-image">
									<!-- <img src="https://via.placeholder.com/100x100" alt="#"> -->
									<div class="content">
										<h3 class="title">
											<a
												href="<%=request.getContextPath()%>/cmmnty/detail.do?cmmntyCode=<%=cv.getCmmntyCode()%>">"<%=cv.getCmmntyTitle()%>"
											</a>
										</h3>
										<!-- <span class="price">$800</span> -->
									</div>
								</div>
							</div>

							<div class="col-lg-2 col-md-2 col-12">
								<p>
								<%=mypageService.getNick(cv.getCstmrId())%>
								</p>
							</div>
							<div class="col-lg-2 col-md-2 col-12">
								<p><%=cv.getCmmntyDate()%></p>
							</div>
							<div class="col-lg-3 col-md-3 col-12 align-right">
								<ul class="action-btn">
									<!-- í¸ì§‘ -->
									<li><a
										href="<%=request.getContextPath()%>/mypage/postmodify.do?cmmntyCode=<%=cv.getCmmntyCode()%>"><i
											class="lni lni-pencil"></i></a></li>
									<!-- ìƒì„¸ë³´ê¸° -->
									<li><a
										href="<%=request.getContextPath()%>/cmmnty/detail.do?cmmntyCode=<%=cv.getCmmntyCode()%>"><i
											class="lni lni-eye"></i></a></li>
									<!-- ì‚­ì œ -->
<!-- 									<li><a -->
<%-- 										href="<%=request.getContextPath()%>/mypage/postdelete.do?cmmntyCode=<%=cv.getCmmntyCode()%>"><i --%>
<!-- 											class="lni lni-trash"></i></a></li> -->
											<li>
									    <a href="#" class="delete-post" data-cmmnty-code="<%=cv.getCmmntyCode()%>">
									        <i class="lni lni-trash"></i>
									    </a>

									</li>
								</ul>
							</div>

						</div>
					</div>
					<%
								}
								}
								%>
				</div>
				
<script type="text/javascript">
    $(document).ready(function() {
        $('.delete-post').click(function(e) {
            e.preventDefault();

            var cmmntyCode = $(this).data('cmmnty-code');

            Swal.fire({
                title: 'ê²Œì‹œë¬¼ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
                text: 'ì‚­ì œí•œ ê²Œì‹œë¬¼ì€ ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'ì‚­ì œ',
                cancelButtonText: 'ì·¨ì†Œ',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed) {
                    // ì‚¬ìš©ìê°€ í™•ì¸ì„ ëˆ„ë¥¸ ê²½ìš°
                    window.location.href = '<%=request.getContextPath()%>/mypage/postdelete.do?cmmntyCode=' + cmmntyCode;
                } else {
                    // ì‚¬ìš©ìê°€ ì·¨ì†Œ ë˜ëŠ” ê±°ì ˆì„ ëˆ„ë¥¸ ê²½ìš°
                    Swal.fire('ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.', '', 'info');
                }
            });
        });
    });
</script>
				<!-- End Items Area -->
			</div>
		</div>
	</div>

</body>
</html>