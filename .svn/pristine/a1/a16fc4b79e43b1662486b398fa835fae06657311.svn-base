<%@page import="meeting.service.MeetingServiceImpl"%>
<%@page import="meeting.service.IMeetingService"%>
<%@page import="meeting.vo.MeetingVO"%>
<%@page import="java.time.format.DateTimeFormatter"%>
<%@page import="java.time.LocalTime"%>
<%@page import="mypage.vo.ProfileImgVO"%>
<%@page import="mypage.service.MypageServiceImple"%>
<%@page import="mypage.service.IMypageService"%>
<%@page import="restaurant.service.RestaurantServiceImpl"%>
<%@page import="restaurant.service.RestaurantService"%>
<%@page import="mypage.vo.ReviewVO"%>
<%@page import="member.vo.CustomerVO"%>
<%@page import="org.apache.jasper.tagplugins.jstl.core.ForEach"%>
<%@page import="restaurant.vo.MenuVO"%>
<%@page import="java.util.List"%>
<%@page import="restaurant.vo.BusinessVO"%>
<%@page import="restaurant.vo.RestaurantVO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html class="no-js" lang="zxx">
<%
	IMypageService mypage = MypageServiceImple.getInstance();
RestaurantService rstService = RestaurantServiceImpl.getInstance();
IMeetingService meetingService = MeetingServiceImpl.getInstance();

CustomerVO myInfo = (CustomerVO) request.getSession().getAttribute("loginCode");

RestaurantVO rv = (RestaurantVO) request.getAttribute("restaurant");
String[] addressParts = (String[]) request.getAttribute("addr");

BusinessVO bv = (BusinessVO) request.getAttribute("bv");

List<MenuVO> menuList = (List<MenuVO>) request.getAttribute("menuList");

int rstrntCode = Integer.parseInt(request.getParameter("rstrntCode"));

List<ReviewVO> reviewList = rstService.getReviewList(rstrntCode);

List<MeetingVO> meetingList = (List<MeetingVO>) request.getAttribute("meetingList");
%>
<head>
<meta charset="utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<title>ë§›ìˆì„ì§€ë„ ğŸ§‘â€ğŸ³</title>
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="shortcut icon" type="image/x-icon"
	href="assets/images/favicon.svg" />
<!-- Place favicon.ico in the root directory -->
<!-- Import additional fonts -->
<style>
@import
   url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;500&display=swap')
   ;
@font-face {
    font-family: 'GmarketSansMedium';
    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2001@1.1/GmarketSansMedium.woff') format('woff');
    font-weight: normal;
    font-style: normal;
}
*{
  font-family: 'GmarketSansMedium';
}
</style>
<!-- Web Font -->
<link
	href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
	rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap"
	rel="stylesheet">
<link rel='stylesheet' href='https://cdn-uicons.flaticon.com/2.1.0/uicons-solid-straight/css/uicons-solid-straight.css'>
<!-- ========================= CSS here ========================= -->
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/assets/css/bootstrap.min.css" />
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/assets/css/LineIcons.2.0.css" />
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/assets/css/animate.css" />
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/assets/css/tiny-slider.css" />
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/assets/css/glightbox.min.css" />
<link rel="stylesheet"
	href="<%=request.getContextPath()%>/assets/css/main.css" />
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css" />



<!-- í°íŠ¸ì–´ì¸ CDN -->
<script src="https://kit.fontawesome.com/1cc7793b32.js"
	crossorigin="anonymous"></script>

<!-- jQuery CDN -->
<script
	src="<%=request.getContextPath()%>/assets/js/jquery-3.7.1.min.js"></script>


<style>
/
body {
/* 	font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; */
	background-color: #f8f9fa; /* ë°ì€ íšŒìƒ‰ ë°°ê²½ìœ¼ë¡œ ë³€ê²½ */
	margin: 0;
	padding: 0;
	height: 100vh;
	display: flex;
	justify-content: center;
	align-items: center;
}

/* ëª¨ë‹¬ ì´ˆê¸°ì—ëŠ” ìˆ¨ê¸°ê¸° */
#myModal {
	display: none;
}

/* ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ bodyì— ì ìš©ë˜ëŠ” ìŠ¤íƒ€ì¼ */
body.modal-open {
	overflow: hidden;
}

/* .modal ìŠ¤íƒ€ì¼ */
.modal {
	display: none;
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	background-color: #fff;
	padding: 15px; /* ìƒí•˜ ì—¬ë°± ì¡°ì ˆ */
	border-radius: 10px;
	box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
	z-index: 1;
	width: 300px;
	height: 800px; /* ì˜ˆì‹œë¡œ ì¡°ì ˆ, ì›í•˜ëŠ” í¬ê¸°ë¡œ ìˆ˜ì •í•˜ì„¸ìš” */
	max-width: 80%;
}

/* ëª¨ë‹¬ ë‚´ë¶€ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
.modal label {
	display: block;
	margin-bottom: 8px;
	color: #555;
}

.modal input, .modal textarea, .modal button {
	width: 100%;
	padding: 10px;
	margin-bottom: 20px;
	box-sizing: border-box;
	border: 1px solid #ddd;
	border-radius: 5px;
}

.modal button {
	background-color: #6c3483;
	color: #fff;
	border: none;
	cursor: pointer;
}

.modal button:hover {
	background-color: #5b2c6f;
}

.modal-close {
	position: absolute;
	top: 10px;
	right: 10px;
	font-size: 20px;
	color: #555;
	cursor: pointer;
}

.success-message {
	color: #6c3483;
	font-weight: bold;
	margin-top: 10px;
	text-align: center;
}

    .upload-input {
        display: flex;
        align-items: center;
    }

    .upload-input label {
        cursor: pointer;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        margin-right: 10px;
    }

    #selected-file {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 150px; /* ìµœëŒ€ ë„ˆë¹„ ì œí•œ */
        flex-grow: 1; /* ë‚¨ì€ ê³µê°„ì„ ëª¨ë‘ ì°¨ì§€í•˜ë„ë¡ ì„¤ì • */
    }

    #preview-image {
        max-width: 300px;
        max-height: 300px;
        margin-left: 20px; /* íŒŒì¼ ì„ íƒ ë°•ìŠ¤ì™€ ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ì‚¬ì´ì˜ ì—¬ë°± ì¡°ì ˆ */
    }
</style>

</head>
<body>
	<!--[if lte IE 9]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="https://browsehappy.com/">upgrade your browser</a> to improve
        your experience and security.
      </p>
    <![endif]-->

	<!-- Preloader ë¡œë”©ì¤‘-->
	<div class="preloader">
		<div class="preloader-inner">
			<div class="preloader-icon">
				<span></span> <span></span>
			</div>
		</div>
	</div>
	<!-- /End Preloader -->

	<!-- Start Header Area -->
   <header class="header navbar-area">
      <div class="container">
         <div class="row align-items-center">
            <div class="col-lg-12">
               <div class="nav-inner">
                  <nav class="navbar navbar-expand-lg">
                     <a class="navbar-brand" href="home.do"> <img
                        src="${pageContext.request.contextPath}/assets/images/logo/ë§›ìˆì„ì§€ë„ë¡œê³ .png"
                        alt="Logo">
                     </a> </a>
                     <button class="navbar-toggler mobile-menu-btn" type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="toggler-icon"></span> <span class="toggler-icon"></span>
                        <span class="toggler-icon"></span>
                     </button>
                     <div class="collapse navbar-collapse sub-menu-bar"
                        id="navbarSupportedContent">
                        <ul id="nav" class="navbar-nav ms-auto">
                           <!-- <li class="nav-item"><a class=" dd-menu collapsed"
                              href="javascript:void(0)" data-bs-toggle="collapse"
                              data-bs-target="#submenu-1-1"
                              aria-controls="navbarSupportedContent" aria-expanded="false"
                              aria-label="Toggle navigation">Home</a>
                              </li> -->
                           <li class="nav-item"><a class=" dd-menu collapsed"
                              href="<%=request.getContextPath()%>/cmmnty/list.do" 
                              >ììœ ê²Œì‹œíŒ ğŸ“‹</a>
                              </li>
                            <li class="nav-item"><a class=" active dd-menu collapsed"
                              href="<%=request.getContextPath()%>/admin/noticeList.do" 
                              >ê³µì§€ì‚¬í•­ğŸ“£</a></li>
                              
                           <li class="nav-item"><a class=" dd-menu collapsed"
                              href="<%=request.getContextPath()%>/faq.html" 
                              >ìì£¼ë¬»ëŠ”ì§ˆë¬¸ â“</a></li>
                              
                           <li class="nav-item"><a class=" dd-menu collapsed"
                              href="<%=request.getContextPath()%>/mypage/setting.do"
                              >ë§ˆì´í˜ì´ì§€ &#128064;</a></li>
                     </div>
                     <!-- navbar collapse -->
                     <div class="login-button">
                        <ul>
                           <li><a href="<%=request.getContextPath()%>/views/customer/login.html"><i class="lni lni-enter"></i>
                                 ë¡œê·¸ì¸</a></li>
                           <li><a href="<%=request.getContextPath()%>/regist.do"><i
                                 class="lni lni-user"></i> íšŒì›ê°€ì…</a></li>
                        </ul>
                     </div>
                     <div class="button header-button">
                        <a href="<%=request.getContextPath()%>/mypage/setting.do"class="btn">í”„ë¡œí•„ì‚¬ì§„</a>
                     </div>
                  </nav>
                  <!-- navbar -->
               </div>
            </div>
         </div>
         <!-- row -->
      </div>
      <!-- container -->
   </header>
   <!-- End Header Area -->

	<!-- Start Breadcrumbs -->
	<div class="breadcrumbs">
		<div class="container">
			<div class="row align-items-center">
				<div class="col-lg-6 col-md-6 col-12">
					<div class="breadcrumbs-content">
						<h1 class="page-title">ê°€ê²Œ ìƒì„¸ë³´ê¸°</h1>
					</div>
				</div>
				<div class="col-lg-6 col-md-6 col-12">
					<ul class="breadcrumb-nav">
						<li><a href="index.html">í™ˆ</a></li>
						<li>ê°€ê²Œ ìƒì„¸ë³´ê¸°</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	<!-- End Breadcrumbs -->

	<!-- Start Item Details -->
	<section class="item-details section">
		<div class="container">
			<div class="top-area">
				<div class="row">
					<div class="col-lg-6 col-md-12 col-12">
						<div class="product-images">
							<main id="gallery">
								<div class="main-
">
									<%
										int cnt = 0;
									for (ReviewVO review : reviewList) {
										if (mypage.reviewImgPath(review.getReviewNo()).equals("noImg")) {
										} else if (cnt == 0) {
									%>
									<img
										src="<%=request.getContextPath()%>\<%=mypage.reviewImgPath(review.getReviewNo())%>"
										id="current" alt="#">
									<%
										cnt++;
									} else if (cnt == 1) {
									%>
									<div class="images">
										<img
											src="<%=request.getContextPath()%>\<%=mypage.reviewImgPath(review.getReviewNo())%>"
											class="img" alt="#">
										<%
											cnt++;
										} else if (cnt >= 2 && cnt < reviewList.size()) {
										%>
										<img
											src="<%=request.getContextPath()%>\<%=mypage.reviewImgPath(review.getReviewNo())%>"
											class="img" alt="#">
										<%
											cnt++;
										} else {
										%>
									</div>
									<%
										}
									}
									%>
								</div>
							</main>
						</div>
					</div>
					<div class="col-lg-6 col-md-12 col-12">
						<div class="product-info">
							<h2 class="title">
								<%=rv.getRstrntName()%>
							</h2>
							<div class="cert_mark">
								<p class="check_mark">
									<%
										String sc = rv.getRstrntScore().substring(0, 2);
									if (Integer.parseInt(sc) > 80) {
									%>
									<i class="fa fa-check-circle" aria-hidden="true"></i>
									<%
										}
									%>
								</p>
								<p class="like_mark">
									<%
										if (rv.getRstrntLike() > 100) {
									%>
									<i class="fa fa-gratipay" aria-hidden="true"></i>
									<%
										}
									%>
								</p>
							</div>
							<p class="location">
								<i class="lni lni-map-marker"></i>
								<%
									for (String addr : addressParts) {
								%>
								<a href='/TasteMap/map.do?addr=<%=rv.getRstrntAddr()%>'
									class="local" target="_blank"> <%=addr%>
								</a>
								<%
									}
								%>
							</p>
							<h5 class="score_avg">
								<%
									
								%>
							</h5>
							<div class="star-wrapper">
								<p class="starBtn">
									<i class="fa fa-star" aria-hidden="true"></i>
								</p>
								<span class="score_starBtn"> <%=rv.getRstrntScore()%>
								</span>
							</div>
							<div class="list-info">
								<h4>Informations</h4>


								<%
									if (myInfo != null) {
									request.setAttribute("rstrntCode", rv.getRstrntCode());
								%>
								<div>
									<p class="map_view" onclick="openModal()">ëª¨ì„ ë“±ë¡</p>

									<div id="myModal" class="modal">
										<span class="modal-close" onclick="closeModal()">&times;</span>
										<label for="locationInput">ì§€ì—­:</label> <input type="text"
											id="locationInput" placeholder="ëŒ€ì „"> <label
											for="dateInput">ë‚ ì§œ:</label> <input type="date" id="dateInput">

										<label for="timeInput">ì‹œê°„:</label> <input type="time"
											id="timeInput"> <label for="maxPeopleInput">ìµœëŒ€
											ì¸ì›:</label> <input type="number" id="maxPeopleInput" min="1">

										<label for="descriptionInput">í•œì¤„ ë‚´ìš©:</label>
										<textarea id="descriptionInput" rows="4"
											placeholder="ëª¨ì„ì— ëŒ€í•œ ê°„ë‹¨í•œ ì„¤ëª…"></textarea>

										<button onclick="submitForm()">ë“±ë¡</button>
										<button onclick="closeModal()">ì·¨ì†Œ</button>
										<div id="successMessage" class="success-message"></div>
									</div>
									<%
										}
									%>




									<script>
    function toggleModal() {
            const modal = document.getElementById('myModal');
            document.body.classList.toggle('modal-open');
            modal.style.display = (modal.style.display === 'none' || modal.style.display === '') ? 'block' : 'none';
        }
    function openModal() {
        document.getElementById('myModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('myModal').style.display = 'none';
    }

    function submitForm() {
    	var locationValue = document.getElementById('locationInput').value;
    	var dateValue = document.getElementById('dateInput').value;
    	var timeValue = document.getElementById('timeInput').value;
    	var maxPeopleValue = document.getElementById('maxPeopleInput').value;
    	var descriptionValue = document.getElementById('descriptionInput').value;
//     	var hidden = document.getElementById('hiddenInput').value; // ìˆ˜ì •ëœ ë¶€ë¶„
		var hidden = "<%=rv.getRstrntCode()%>";
		console.log(hidden);

        // Ajax ìš”ì²­
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                    // ì‘ë‹µ ì²˜ë¦¬
                    document.getElementById('successMessage').innerText = 'ëª¨ì„ì´ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!';
                    setTimeout(function() {
                        successMessageElement.innerText = '';
                        closeModal();
                        // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
                        location.reload();
                    }, 2000);
                    // ì„±ê³µ ë©”ì‹œì§€ë¥¼ ëª‡ ì´ˆ í›„ì— ìˆ¨ê¸°ê±°ë‚˜ ì ì ˆí•œ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬ ê°€ëŠ¥
                    setTimeout(function() {
                        document.getElementById('successMessage').innerText = '';
                        closeModal();
                    }, 2000);
                } else {
                    // ì—ëŸ¬ ì²˜ë¦¬
                    document.getElementById('successMessage').innerText = 'ë“±ë¡ ì‹¤íŒ¨. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                }
            }
        };

        // ë™ì ìœ¼ë¡œ ì„œë¸”ë¦¿ URL ìƒì„±
        var servletUrl = "restaurant/meeting.do"; // ì‹¤ì œ ì„œë¸”ë¦¿ ê²½ë¡œ
        var urlWithParams = servletUrl + "?location=" + encodeURIComponent(locationValue) +
                            "&date=" + encodeURIComponent(dateValue) +
                            "&time=" + encodeURIComponent(timeValue) +
                            "&maxPeople=" + encodeURIComponent(maxPeopleValue) +
                            "&description=" + encodeURIComponent(descriptionValue)+
                            "&hidden="+ encodeURIComponent(hidden);

        xhr.open("POST", urlWithParams, true);
        xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');

        xhr.send();
    }

    </script>




									<ul>
										<li><span><i class="fa fa-phone"
												aria-hidden="true"></i></span> "<%=rv.getRstrntTel()%>"</li>
										<li><span><i class="fa fa-tag" aria-hidden="true"></i></span>
											<%=rv.getRstrntTag()%></li>
									</ul>
								</div>






								<div class="contact-info">
									<ul>
										<li><a href="#" class="reservation"> <i
												class="fa fa-calendar-plus-o" aria-hidden="true"></i> ì˜ˆì•½ <span>reservation
													& Get more info</span>
										</a></li>
										<li><a href="javascript:kakaoShare()" class="share open_btn"> <i
												class="fa fa-share-square-o" aria-hidden="true"></i>
										</a></li>
									</ul>
								</div>
								<div class="like-mark">
									<ul>
										<li><a href="javascript:void(0)" class="likeBtn"> <i
												class="fa fa-heart" aria-hidden="true"></i>
										</a></li>
										<span id="count_like"><%=rv.getRstrntLike()%></span>
										
										<%if(myInfo != null){ %>
										<li>
										<a href="#" class="bookBtnY"
										 data-rst-code="<%=rv.getRstrntCode()%>"> 
										<i class="fa fa-bookmark" aria-hidden="true"></i>
										</a>
										</li>
										<%} else{ %>
										<li>
										<a href="#" class="bookBtnN"> 
										<i class="fa fa-bookmark" aria-hidden="true"></i>
										</a>
										</li>
										<%} %>
										
									</ul>
								</div>

							</div>

						</div>
					</div>
				</div>
<script type="text/javascript">
$(".bookBtnY").click(function () {
	var rstrntCode = $(this).data('rst-code');
	Swal.fire({
		   title: '<%=rv.getRstrntName()%>',
		   text: 'ì¦ê²¨ì°¾ê¸°ì— ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
		   icon: 'warning',
		   
		   showCancelButton: true, // cancelë²„íŠ¼ ë³´ì´ê¸°. ê¸°ë³¸ì€ ì›ë˜ ì—†ìŒ
		   confirmButtonColor: '#3085d6', // confrim ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
		   cancelButtonColor: '#d33', // cancel ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
		   confirmButtonText: 'ë“±ë¡í•˜ê¸°', // confirm ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
		   cancelButtonText: 'ì·¨ì†Œí•˜ê¸°', // cancel ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
		   
		   reverseButtons: true, // ë²„íŠ¼ ìˆœì„œ ê±°ê¾¸ë¡œ
		   
		}).then(result =>  {
		   // ë§Œì•½ Promiseë¦¬í„´ì„ ë°›ìœ¼ë©´,
		   if (result.isConfirmed) { // ë§Œì•½ ëª¨ë‹¬ì°½ì—ì„œ confirm ë²„íŠ¼ì„ ëˆŒë €ë‹¤ë©´
		      Swal.fire('ë“±ë¡ì„ ì§„í–‰í•©ë‹ˆë‹¤.', 'ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”~', 'success');
		      $.ajax({
		          type: 'POST', // ë˜ëŠ” 'GET'
		          url: 'restaurant/addfavorite.do', // ì„œë¸”ë¦¿ URL
		          data: { rstrntCode : rstrntCode }, // ì „ì†¡í•  ë°ì´í„°
		          success: function(response) {
		             // ì„œë¸”ë¦¿ì—ì„œì˜ ì²˜ë¦¬ê°€ ì„±ê³µí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
		             Swal.fire('ì¦ê²¨ì°¾ê¸° ì¶”ê°€ì— ì„±ê³µí•˜ì…¨ìŠµë‹ˆë‹¤.', 'ì¶•í•˜í•©ë‹ˆë‹¤!', 'success');
		             location.reload();
		          },
		          error: function(error) {
		             // ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
		             Swal.fire('ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'error');
		          }
		       });
		   
		   }
		});
  });
$(".bookBtnN").click(function () {
    Swal.fire({
      icon: 'error',
      title: 'ë¡œê·¸ì¸ ì •ë³´ ì—†ìŒ.',
      text: 'ì¦ê²¨ì°¾ê¸° ê¸°ëŠ¥ì€ ë¡œê·¸ì¸ ì´í›„ì— ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
    });
  });
</script>
				<!-- 24-01-11/////////////////////////////////////////////////////////////////////// -->
				<div class="item-details-blocks">
					<div class="row">
						<div class="col-lg-8 col-md-7 col-12">
							<!-- Start Single Block -->
							<div class="single-block description time_OL">
								<div class="OLState">
									<h3 class="time">ì˜ì—…ì‹œê°„</h3>
									<%
									LocalTime currentTime = LocalTime.now();
									DateTimeFormatter formatter = DateTimeFormatter.ofPattern("HH:mm:ss");
									LocalTime openTime = LocalTime.parse(bv.getBsnOpentime());
									LocalTime closeTime = LocalTime.parse(bv.getBsnClosetime());
									if (currentTime.isAfter(openTime) && currentTime.isBefore(closeTime)) {
									%>
									<p class="open">OPEN</p>
									<%
										} else {
									%>
									<p class="open">CLOSE</p>
									<%
										}
									%>
									<i class="fa fa-clock-o" aria-hidden="true"></i>
								</div>
								<ul class="details-list">
									<li class="time">ì˜¤í”ˆì‹œê°„ : <%=bv.getBsnOpentime()%>
									</li>
									<li class="time">ë§ˆê°ì‹œê°„ : <%=bv.getBsnClosetime()%>
									</li>
									<li class="time additional-info">íœ´ê²Œì‹œê°„ : <%=bv.getBsnReststart()%>
										~ <%=bv.getBsnRestfinish()%>
									</li>
								</ul>
							</div>
							<!-- End Single Block -->
							<!-- Start Single Block -->
							<!-- End Single Block -->


							<!-- /////////////////////////////////////////////////////////////////////// -->

							<!-- 2021-01-14 ì—¬ê¸°ë¶€í„°1!!!!!/////////////////////////////////////////////////////////////////////// -->
							<!-- Start Single Block -->
							<div class="single-block menu_box">
								<div class="menu_info">
									<h3>ë©”ë‰´ì •ë³´</h3>
									<div class="menu_list">
										<table>
											<%
												int displayMenuCount = 10;
											for (int i = 0; i < Math.min(menuList.size(), displayMenuCount); i++) {
												MenuVO mv = menuList.get(i);
											%>




											<tr class="menu_iist_box">
												<td class="menu_food"><%=mv.getMenuName()%></td>
												<td class="menu_line">----------------------------------------------------------------------------------------------------------------------------------------------------</td>
												<td class="menu_price"><%=mv.getMenuPrice()%></td>
											</tr>

											<%
												}
											%>



										</table>
									</div>
								</div>
							</div>
							<!-- End Single Block -->
							<!-- Start Single Block -->
							<div class="single-block comments visitor_review">
								<h3 class="visitor_review_title">ë°©ë¬¸ì ë¦¬ë·°</h3>
								<!-- 2024-01-16 ì‘ì„± -->
								<div class="visitor_review_starBtn">
									<ul class="visitor_review_starBtn_content">

										<%
											int score = 0;
										int taste = 0;
										int price = 0;
										int service = 0;
										for (ReviewVO review : reviewList) {
											score += review.getReviewScore();
											taste += review.getReviewTaste();
											price += review.getReviewPrice();
											service += review.getReviewService();
										}
										%>
										<li class="visitor_review_starBtn_title">ë¦¬ë·°ì´ì  :</li>



										<li class="visitor_review_starBtn_content_i">

											<div class="visitor_review_content_star" id="starContainer">
												<%
													for (int i = 1; i <= 5; i++) {
													if (i <= score / reviewList.size()) {
												%>
												<i class="fa fa-star" aria-hidden="true"></i>
												<%
													} else {
												%>



												<i class="fa fa-star-o" aria-hidden="true"></i>

												<%
													}
												}
												%>
											</div> <!-- ë³„ ë„£ê¸° -->
									</ul>


									<div class="visitor_review_starBtn_op">
										<span>ë§›: <%=(taste / reviewList.size())%><i
											class="fa fa-star" aria-hidden="true"></i></span> <span>ê°€ê²©: <%=(price / reviewList.size())%><i
											class="fa fa-star" aria-hidden="true"></i></span> <span>ì„œë¹„ìŠ¤:
											<%=(service / reviewList.size())%><i class="fa fa-star"
											aria-hidden="true"></i>
										</span>
									</div>


								</div>
								<div class="visitor_review_tags">
									<ul class="visitor_review_purpose1">
										<li class="visitor_review_purpose_title1">ë°©ë¬¸ëª©ì </li>
										<li class="tag1">tag1</li>
										<li class="tag2">tag2</li>
									</ul>
									<ul class="visitor_review_purpose2">
										<li class="visitor_review_purpose_title2">ë¶„ìœ„ê¸°</li>
										<li class="tag1">tag1</li>
										<li class="tag2">tag2</li>
									</ul>
								</div>

								<%
									for (ReviewVO review : reviewList) {
								%>
								<!-- Start Single Comment -->
								<div class="single-comment visitor_review_comment">
									<div class="visitor_review_content">
										<div class="visitor_review_review_comment_box">

											<%
												if (mypage.getProfileImgNo(review.getCstmrId()) != 0) {
												ProfileImgVO img = mypage.profileImgInfo(mypage.getProfileImgNo(review.getCstmrId()));
												String src = img.getProfileImgCours() + "/" + img.getProfileImgName();
											%>
											<img class="profileImg"
												src="${pageContext.request.contextPath}/<%=src%>" alt="Logo">
											<%
												} else {
											%>
											<img class="profileImg"
												src="${pageContext.request.contextPath}/assets/images/profile/defaulprofile.png"
												alt="ê¸°ë³¸ì´ë¯¸ì§€">
											<%
												}
											%>



											<h4>
												<%=mypage.getNick(review.getCstmrId())%>
											</h4>
											<div class="visitor_review_content_icon">
												<div class="visitor_review_content_ds">
													<div class="visitor_review_content_star"
														id="starContainer_<%=review.getReviewNo()%>">
														<i class="fa fa-star-o" aria-hidden="true"></i> <i
															class="fa fa-star-o" aria-hidden="true"></i> <i
															class="fa fa-star-o" aria-hidden="true"></i> <i
															class="fa fa-star-o" aria-hidden="true"></i> <i
															class="fa fa-star-o" aria-hidden="true"></i>
													</div>
													<div class="visitor_review_content_day">
														<%=review.getReviewDate()%>
													</div>
												</div>
												<div class="visitor_review_content_op">
													<span>ë§›: <%=review.getReviewTaste()%> <i
														class="fa fa-star" aria-hidden="true"></i>
													</span> <span>ê°€ê²© : <%=review.getReviewPrice()%><i
														class="fa fa-star" aria-hidden="true"></i>
													</span> <span>ì„œë¹„ìŠ¤: <%=review.getReviewService()%> <i
														class="fa fa-star" aria-hidden="true"></i>
													</span>
												</div>
											</div>

											<div class="visitor_review_content_it">
												<span class="visitor_review_content_img"> <%
													 	if (mypage.reviewImgPath(review.getReviewNo()).equals("noImg")) {
													 %> <%
													 	} else {
													 %> <img class="reviewImg"
													src="<%=request.getContextPath()%>\<%=mypage.reviewImgPath(review.getReviewNo())%>"
													alt="#"> <%
														 	}
														 %>
												</span>


												<p class="visitor_review_text">
													<%=review.getReviewContent()%>
												</p>
											</div>
										</div>
									</div>
								</div>
								<!-- End Single Comment -->

								<script>
                                    // ìˆ«ìì— ë”°ë¼ì„œ ë³„ì„ ì±„ìš°ëŠ” í•¨ìˆ˜
                                    function fillStars(reviewNo, starCount) {
                                        // í•´ë‹¹ ë¦¬ë·°ì˜ ë³„ ì»¨í…Œì´ë„ˆë¥¼ ì°¾ì•„ì„œ ë³„ì„ ì±„ì›€
                                        $('#starContainer_' + reviewNo + ' i').removeClass('fa-star').addClass('fa-star-o');

                                        // ì§€ì •ëœ ë³„ê¹Œì§€ ìƒ‰ê¹”ì„ ì±„ì›€
                                        for (let i = 0; i < starCount; i++) {
                                            $('#starContainer_' + reviewNo + ' i').eq(i).removeClass('fa-star-o').addClass('fa-star');
                                        }
                                    }

                                    // ì˜ˆì œ: ìˆ«ì 3ì— ë”°ë¼ì„œ í•´ë‹¹ ë¦¬ë·°ì˜ ë³„ì„ ì±„ì›€
                                    fillStars(<%=review.getReviewNo()%>, <%=review.getReviewScore()%>);



                                    // ê¸€ì ê¸¸ì´ì— ë”°ë¼ ë™ì ìœ¼ë¡œ ë†’ì´ë¥¼ ì¡°ì ˆí•˜ëŠ” í•¨ìˆ˜
                                    function adjustTextHeight(reviewNo) {
                                        var textElement = $('#reviewText_' + reviewNo);
                                        textElement.css('height', 'auto'); // ì´ˆê¸° ë†’ì´ë¥¼ autoë¡œ ì„¤ì •
                                        var textHeight = textElement.height();
                                        var lineHeight = parseInt(textElement.css('line-height'));
                                        var lines = textHeight / lineHeight;
                                        var maxHeight = lineHeight * 3; // ìµœëŒ€ 3ì¤„ê¹Œì§€ í‘œì‹œí•˜ê³  ë” ë§ì€ ê²½ìš°ëŠ” ìŠ¤í¬ë¡¤
                                        if (lines > 3) {
                                            textElement.css('height', maxHeight + 'px');
                                        }
                                    }

                                    // í•´ë‹¹ ë¦¬ë·°ì˜ í…ìŠ¤íŠ¸ì— ëŒ€í•´ ë†’ì´ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì ˆ
                                    adjustTextHeight(<%=review.getReviewNo()%>);
                                </script>
								<%
									}
								%>
							</div>
							<!-- End Single Block -->
							<div class="single-block comment-form">
								<h3>ë¦¬ë·° ì‘ì„±í•˜ê¸°</h3>
								<%
									if (myInfo != null) {
								%>
								<div class="step-two-content">
									<form class="default-form-style" method="post"
										action="<%=request.getContextPath()%>/restaurant/postreview.do"
										enctype="multipart/form-data">
										<div class="row">
											<input type="hidden" name="rstrntCode"
												value="<%=rv.getRstrntCode()%>">
											<div class="col-12 col-md-4">
												<div class="form-group">
													<label>ë§› ì ìˆ˜:</label>
													<div class="selector-head">
														<span class="arrow"><i class="lni lni-chevron-down"></i></span>
														<select class="user-chosen-select" name="reviewTaste">
															<option value="1">â˜…</option>
															<option value="2">â˜…â˜…</option>
															<option value="3">â˜…â˜…â˜…</option>
															<option value="4">â˜…â˜…â˜…â˜…</option>
															<option value="5">â˜…â˜…â˜…â˜…â˜…</option>
														</select>
													</div>
												</div>
											</div>
											<div class="col-12 col-md-4">
												<div class="form-group">
													<label>ê°€ê²© ì ìˆ˜:</label>
													<div class="selector-head">
														<span class="arrow"><i class="lni lni-chevron-down"></i></span>
														<select class="user-chosen-select" name="reviewPrice">
															<option value="1">â˜…</option>
															<option value="2">â˜…â˜…</option>
															<option value="3">â˜…â˜…â˜…</option>
															<option value="4">â˜…â˜…â˜…â˜…</option>
															<option value="5">â˜…â˜…â˜…â˜…â˜…</option>
														</select>
													</div>
												</div>
											</div>
											<div class="col-12 col-md-4">
												<div class="form-group">
													<label>ì„œë¹„ìŠ¤ ì ìˆ˜:</label>
													<div class="selector-head">
														<span class="arrow"><i class="lni lni-chevron-down"></i></span>
														<select class="user-chosen-select" name="reviewService">
															<option value="1">â˜…</option>
															<option value="2">â˜…â˜…</option>
															<option value="3">â˜…â˜…â˜…</option>
															<option value="4">â˜…â˜…â˜…â˜…</option>
															<option value="5">â˜…â˜…â˜…â˜…â˜…</option>
														</select>
													</div>
												</div>
											</div>
											<div class="col-lg-6 col-12">
    <div class="upload-input">
        <label for="file" class="text-center content">
            <span class="text">
                <span class="mb-15 plus-icon"><i class="lni lni-plus"></i></span>
                <span class="main-btn d-block btn-hover">ì´ë¯¸ì§€ íŒŒì¼ ì„ íƒ</span>
            </span>
        </label>
        <input type="file" id="file" name="file" style="display: none;" onchange="displayFilePreview(this)">
        <span id="selected-file">íŒŒì¼ ì„ íƒ</span>
        <div id="preview-image-container">
            <img id="preview-image" src="#" alt="ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€">
        </div>
    </div>
</div>


<script>
    function displayFilePreview(input) {
        var fileInput = input.files[0];

        if (fileInput) {
            var reader = new FileReader();

            reader.onload = function (e) {
                document.getElementById('preview-image').src = e.target.result;
                document.getElementById('selected-file').innerText = fileInput.name;
            };

            reader.readAsDataURL(fileInput);
        } else {
            document.getElementById('preview-image').src = '#';
            document.getElementById('selected-file').innerText = 'íŒŒì¼ ì„ íƒ';
        }
    }
</script>








											<div class="col-12">
												<div class="form-group mt-30">
													<label for="reviewContent">ë¦¬ë·° ë‚´ìš©</label>
													<textarea placeholder="ë¦¬ë·° ë‚´ìš© ì‘ì„±" name="reviewContent"></textarea>
												</div>
											</div>
											<div class="col-12">
												<div class="form-group button mb-0">
													<button type="submit" class="btn alt-btn">ë“±ë¡í•˜ê¸°</button>
													<button type="button" onclick="refreshPage()" class="btn">ì·¨ì†Œí•˜ê¸°</button>
												</div>

											</div>
										</div>
									</form>
								</div>
								<%
									} else {
								%>
								<div class="col-12">
									<a
										href="<%=request.getContextPath()%>/views/customer/login.html">
										ë¡œê·¸ì¸ í•˜ëŸ¬ ê°€ê¸°</a>
								</div>
								<%
									}
								%>



								<!-- ë‹¤ë¥¸ í¼ ìš”ì†Œë“¤ì„ ì—¬ê¸°ì— ì¶”ê°€í•˜ì„¸ìš” -->
								<script>
                                                            function refreshPage() {
                                                                // í˜„ì¬ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨
                                                                location.reload();
                                                            }
                                                        </script>
							</div>


							<!-- Start Single Block -->
							<div class="single-block comment-form">
								<h3>ë¸”ë¡œê·¸ ë¦¬ë·°</h3>
								<div class="blog_form" id="blog_form"></div>
								<form action="#" method="POST">
									<div class="row"></div>
								</form>
							</div>
							<!-- End Single Block -->
						</div>
						<div class="col-lg-4 col-md-5 col-12">
							<div class="item-details-sidebar">
								<!-- Start Single Block -->
								<!-- <div class="single-block author">
								<!-- End Single Block -->
								<!-- Start Single Block -->
								<div class="single-block content-seller comment-form">
									<h3>ê°€ê²Œì—ì„œ ì§„í–‰ì¤‘ì¸ ëª¨ì„</h3>
									<div class="meeting_info-container">
										<i class="fa fa-chevron-left" id="prevMeeting"
											aria-hidden="true"></i>
										<div class="meeting_info-list">
											<%
												int number = 1;
											for (MeetingVO mv : meetingList) {
												if (mv.getMeetingNmpr() != meetingService.getMeetingCount(mv.getMeetingNo())) {
											%>
											<div class="meeting_info in_fo<%=number%>">
												<p class="meeting_title">
													ë‹‰ë„¤ì„ :
													<%=mypage.getNick(mv.getCstmrId())%></p>
												<p class="meeting_region">
													ì¥ì†Œ :
													<%=mv.getMeetingRegion()%></p>
												<p class="meeting_date">
													ë‚ ì§œ :
													<%=mv.getMeetingDate()%><br>ì‹œê°„ :<%=mv.getMeetingTime()%></p>
												<!-- í´ë¦­ ì‹œ JavaScript í•¨ìˆ˜ í˜¸ì¶œ ë° ëª¨ì„ ì •ë³´ ì „ë‹¬ -->
												<button class="meeting_detile meeting_modal"
													onclick="showMeetingDetail('<%=mypage.getNick(mv.getCstmrId())%>', '<%=mv.getMeetingRegion()%>', 
                    '<%=mv.getMeetingNmpr()%>', '<%=mv.getMeetingDate()%>', '<%=mv.getMeetingTime()%>', 
                    '<%=mv.getMeetingComment()%>','<%=mv.getMeetingNo()%>','<%=meetingService.getMeetingCount(mv.getMeetingNo())%>')">ìì„¸íˆë³´ê¸°</button>
											</div>
											<%
												number++;
											}
											}
											%>
										</div>
										<i class="fa fa-chevron-right" id="nextMeeting"
											aria-hidden="true"></i>

										<div id="meeting_modal_detail">
											<div class="meeting_modal_top">
												<span class="meeting_modal_title">ë­ë¨¹ì„ ì§€ë„ ëª¨ì„!</span> <i
													class="fa fa-times close_btn" aria-hidden="true"></i>
											</div>
											<div class="meeting_modal_text">
												<span id="modalMeetingNick"></span> <span
													id="modalMeetingRegion"></span> <span id="modalMeetingNmpr"></span>
												<span id="modalMeetingDate"></span> <span
													id="modalMeetingTime"></span> <span
													id="modalMeetingComment"></span>
												<!-- ìˆ˜ì •ëœ ë¶€ë¶„: ëª¨ì„ ë²ˆí˜¸ë¥¼ ì €ì¥í•  ìš”ì†Œ ì¶”ê°€ -->
												<span id="modalMeetingNo" style="display: none;"></span>
												<!-- "ì°¸ì—¬í•˜ê¸°" ë²„íŠ¼ì— onclick ì´ë²¤íŠ¸ ì¶”ê°€ -->
												<%
													if (myInfo != null) {
												%>
												<span class="meeting_go" id="yesLogin">ì°¸ì—¬í•˜ê¸°</span>
												<%
													} else {
												%>
												<span class="meeting_go" id="noLogin">ì°¸ì—¬í•˜ê¸°</span>
												<%
													}
												%>
												<!-- 				<span class="meeting_go" id="yesLogin">ì°¸ì—¬í•˜ê¸°</span> -->
											</div>
										</div>
									</div>
								</div>

								<script type="text/javascript">
$("#yesLogin").click(function () {
	var meetingNo = document.getElementById('modalMeetingNo').innerText;
	Swal.fire({
		   title: meetingNo+'ë²ˆ ëª¨ì„!',
		   text: 'ëª¨ì„ì— ì°¸ì—¬í•˜ì‹œê² ìŠµë‹ˆê¹Œ?',
		   icon: 'warning',
		   
		   showCancelButton: true, // cancelë²„íŠ¼ ë³´ì´ê¸°. ê¸°ë³¸ì€ ì›ë˜ ì—†ìŒ
		   confirmButtonColor: '#3085d6', // confrim ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
		   cancelButtonColor: '#d33', // cancel ë²„íŠ¼ ìƒ‰ê¹” ì§€ì •
		   confirmButtonText: 'ì°¸ì—¬í•˜ê¸°', // confirm ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
		   cancelButtonText: 'ì·¨ì†Œí•˜ê¸°', // cancel ë²„íŠ¼ í…ìŠ¤íŠ¸ ì§€ì •
		   
		   reverseButtons: true, // ë²„íŠ¼ ìˆœì„œ ê±°ê¾¸ë¡œ
		   
		}).then(result =>  {
		   // ë§Œì•½ Promiseë¦¬í„´ì„ ë°›ìœ¼ë©´,
		   if (result.isConfirmed) { // ë§Œì•½ ëª¨ë‹¬ì°½ì—ì„œ confirm ë²„íŠ¼ì„ ëˆŒë €ë‹¤ë©´
		      Swal.fire('ìŠ¹ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'í™”ëˆí•˜ì‹œë„¤ìš”~!', 'success');
		      $.ajax({
		          type: 'POST', // ë˜ëŠ” 'GET'
		          url: 'restaurant/join.do', // ì„œë¸”ë¦¿ URL
		          data: { meetingNo: meetingNo }, // ì „ì†¡í•  ë°ì´í„°
		          success: function(response) {
		             // ì„œë¸”ë¦¿ì—ì„œì˜ ì²˜ë¦¬ê°€ ì„±ê³µí–ˆì„ ë•Œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
		             Swal.fire('ìŠ¹ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'í™˜ì˜í•©ë‹ˆë‹¤!', 'success');
		          },
		          error: function(error) {
		             // ì—ëŸ¬ ë°œìƒ ì‹œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
		             Swal.fire('ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.', 'error');
		          }
		       });
		   
		   }
		});
  });
$("#noLogin").click(function () {
    Swal.fire({
      icon: 'error',
      title: 'ë¡œê·¸ì¸ ì •ë³´ ì—†ìŒ.',
      text: 'ëª¨ì„ ê¸°ëŠ¥ì€ ë¡œê·¸ì¸ ì´í›„ì— ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.',
    });
  });
  
    function showMeetingDetail(nick, region, nmpr, date, time, comment, meetingNo,meetingCount) {
        // ê° ëª¨ì„ ì •ë³´ë¥¼ ëª¨ë‹¬ì— ì±„ì›Œë„£ê¸°
        document.getElementById('modalMeetingNick').innerText = 'ë‹‰ë„¤ì„ : ' + nick;
        document.getElementById('modalMeetingRegion').innerText = 'ëª¨ì„ì§€ì—­ : ' + region;
        document.getElementById('modalMeetingNmpr').innerText = 'ëª¨ì„ì¸ì›ìˆ˜: ' + nmpr + '(' + meetingCount+ ')';
        document.getElementById('modalMeetingDate').innerText = 'ëª¨ì„ë‚ ì§œ : ' + date;
        document.getElementById('modalMeetingTime').innerText = 'ëª¨ì„ì‹œê°„ : ' + time;
        document.getElementById('modalMeetingComment').innerText = 'ëª¨ì„ ì½”ë©˜íŠ¸ : ' + comment;

        // ëª¨ì„ ë²ˆí˜¸ë¥¼ ì €ì¥
        document.getElementById('modalMeetingNo').innerText = meetingNo;

        // ëª¨ë‹¬ ì°½ ì—´ê¸° ë“±ì˜ ì¶”ê°€ì ì¸ ë™ì‘ ìˆ˜í–‰ ê°€ëŠ¥
        // ì˜ˆì‹œ: ëª¨ë‹¬ ì°½ ì—´ê¸°
        $('#meeting_modal_detail').show();
    }

    

</script>







								<!-- End Single Block -->
								<!-- Start Single Block -->
								<div class="single-block ">
									<h3 class="map_h3">ì§€ë„</h3>
									<div id="map" style="width: 320px; height: 300px;"></div>
								</div>
							</div>
						</div>
					</div>
				</div>


			</div>
		</div>
	</section>
	<!-- End Item Details -->

	<!-- Start Newsletter Area -->
	<!-- End Newsletter Area -->

	<!-- Start Footer Area -->
						
	<%@ include file="../admin/adminFooter.jsp"%>
	<!--/ End Footer Area -->

	<!-- ========================= scroll-top ========================= -->
	<a href="#" class="scroll-top btn-hover"> <i
		class="lni lni-chevron-up"></i>
	</a>

	<!-- ========================= JS here ========================= -->
	<script
		src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
	<script src="<%=request.getContextPath()%>/assets/js/bootstrap.min.js"></script>
	<script src="<%=request.getContextPath()%>/assets/js/wow.min.js"></script>
	<script src="<%=request.getContextPath()%>/assets/js/tiny-slider.js"></script>
	<script src="<%=request.getContextPath()%>/assets/js/glightbox.min.js"></script>
	<script src="<%=request.getContextPath()%>/assets/js/main.js"></script>
	<script src="<%=request.getContextPath()%>/assets/js/item-details.js"></script>
	<script type="text/javascript"
		src="//dapi.kakao.com/v2/maps/sdk.js?appkey=5ccd00174a49121da7c06055801ba062&libraries=services"></script>
		<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
	<script type="text/javascript">

        let mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div 
            mapOption = {
                center: new kakao.maps.LatLng(33.450701, 126.570667), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
                level: 5 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
            };

        // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤    
        let map = new kakao.maps.Map(mapContainer, mapOption);

        // ì§€ë„ ì´ë™ ë„ê¸°
        map.setDraggable(false);

        // ì§€ë„ í™•ëŒ€/ì¶•ì†Œ ë„ê¸°
        map.setZoomable(false);



        // ì£¼ì†Œ-ì¢Œí‘œ ë³€í™˜ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        let geocoder = new kakao.maps.services.Geocoder();

        // ì£¼ì†Œ ì •ë³´ ë‹´ì€ ë°°ì—´ ì„ ì–¸ í›„ forë¬¸ ëŒë ¤ì„œ ë§ˆì»¤ ì „ë¶€ ì°ê¸°(ê°ì²´ ë°°ì—´ í™œìš©)
        // í•´ë‹¹ ê°€ê²Œ ì§€ë„ëŠ” ì£¼ì†Œ ë°›ì•„ì„œ ë„£ê¸°
        // ê°€ê²Œ ì£¼ì†Œ í´ë¦­ ì‹œ í•´ë‹¹ ê°€ê²Œ ì£¼ì†Œ ë„£ê¸°


        // ì£¼ì†Œë¡œ ì¢Œí‘œë¥¼ ê²€ìƒ‰í•©ë‹ˆë‹¤
        geocoder.addressSearch("<%=rv.getRstrntAddr()%>", function (result, status) {

            // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´ 
            if (status === kakao.maps.services.Status.OK) {

                let coords = new kakao.maps.LatLng(result[0].y, result[0].x);

                // ê²°ê³¼ê°’ìœ¼ë¡œ ë°›ì€ ìœ„ì¹˜ë¥¼ ë§ˆì»¤ë¡œ í‘œì‹œí•©ë‹ˆë‹¤
                let marker = new kakao.maps.Marker({
                    map: map,
                    position: coords
                });

                // ì¸í¬ìœˆë„ìš°ë¡œ ì¥ì†Œì— ëŒ€í•œ ì„¤ëª…ì„ í‘œì‹œí•©ë‹ˆë‹¤
                let infowindow = new kakao.maps.InfoWindow({
                    // ì£¼ì†Œì— í•´ë‹¹í•˜ëŠ” ê°€ê²Œ ëª… + ê°€ê²Œ í˜ì´ì§€ ë§í¬ ë„£ê¸°
                    content: '<div style="text-align:center;width:150px;padding:6px 0;background-color:#fff; font-size:12px; color:#5830E0; font-weight:bold;">' + "<%=rv.getRstrntName()%>"+ '</div>'});
								infowindow.open(map, marker);
								map.setCenter(coords); // ì²˜ìŒ ì£¼ì†Œ ê°€ìš´ë° ê³ ì •ì‹œí‚¤ê¸°
							}
						});

		let rst = <%=request.getAttribute("blog")%>
		console.log(rst);

		let newUl = document.createElement('ul');
		newUl.className = "ul";

		for (let i = 0; i < rst.length; i++) {

			let titleLi = document.createElement("li");
			titleLi.className = "blog_review_title";

			let titleLink = document.createElement("a");
			titleLink.href = rst[i].link;
			titleLink.target = "_blank";
			titleLink.innerHTML = rst[i].title;

			titleLi.appendChild(titleLink);

			let contentLi = document.createElement("li");
			contentLi.className = "blog_review_content";
			contentLi.innerHTML = rst[i].description;

			// <div> ìš”ì†Œ ìƒì„±
			let divReview = document.createElement("div");
			divReview.className = "blog_review_nt";

			// <li> ìš”ì†Œë“¤ ìƒì„± ë° ë‚´ìš© ì„¤ì •
			let nameLi = document.createElement("li");
			nameLi.className = "blog_review_name";
			nameLi.textContent = rst[i].bloggername;

			let dateLi = document.createElement("li");
			dateLi.className = "blog_review_date";

			let dateString = rst[i].postdate;

			let year = dateString.substring(0, 4);
			let month = dateString.substring(4, 6);
			let day = dateString.substring(6, 8);

			let postDate = year + "-" + month + "-" + day;

			dateLi.textContent = postDate;

			divReview.appendChild(nameLi);
			divReview.appendChild(dateLi);

			// <ul> ìš”ì†Œì— <li>ì™€ <div> ìš”ì†Œë“¤ ì¶”ê°€
			newUl.appendChild(titleLi);
			newUl.appendChild(contentLi);
			newUl.appendChild(divReview);
		}

		let div = document.getElementById("blog_form");
		div.appendChild(newUl);
		
		console.log("<%=request.getContextPath()%>/<%=rstService.getRstrntFile(request.getParameter("rstrntCode"))%>");
		
		Kakao.init('5ccd00174a49121da7c06055801ba062');
		
		console.log("<%=request.getContextPath()%>\<%=mypage.reviewImgPath(reviewList.get(0).getReviewNo())%>");

        function kakaoShare() {
            Kakao.Link.sendDefault({
                objectType: 'feed',
                content: {
                    title: "<%=rv.getRstrntName()%>",
                    description: `<%=menuList.get(0).getMenuName()%>
<%=rv.getRstrntAddr()%>`,
                    imageUrl: 'http://192.168.143.33:8888/<%=request.getContextPath()%><%=mypage.reviewImgPath(reviewList.get(0).getReviewNo())%>',
                    link: {
                        mobileWebUrl: 'http://localhost:8888/TasteMap/restaurantDetail.do?rstrntCode=<%=rv.getRstrntCode()%>',
                        webUrl: 'http://localhost:8888/TasteMap/restaurantDetail.do?rstrntCode=<%=rv.getRstrntCode()%>',
                    },
                },
                buttons: [
                    {
                        title: 'ì›¹ìœ¼ë¡œ ë³´ê¸°',
                        link: {
                            mobileWebUrl: 'http://localhost:8888/TasteMap/restaurantDetail.do?rstrntCode=<%=rv.getRstrntCode()%>',
                            webUrl: 'http://localhost:8888/TasteMap/restaurantDetail.do?rstrntCode=<%=rv.getRstrntCode()%>'
                        },
                    },
                ],
                // ì¹´ì¹´ì˜¤í†¡ ë¯¸ì„¤ì¹˜ ì‹œ ì¹´ì¹´ì˜¤í†¡ ì„¤ì¹˜ ê²½ë¡œì´ë™
                installTalk: true,
            })
        }
	</script>



</body>

</html>